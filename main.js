(()=>{"use strict";var e={310:(e,t,a)=>{a.r(t)},269:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(a(605));t.default=class{static createTitle(){return(0,i.default)("h2",[],"Hasher")}static createDropField(){const e=(0,i.default)("div",["drop-field"]),t=(0,i.default)("input",["overlapped"],"");t.setAttribute("type","file"),t.dataset.id="file";const a=(0,i.default)("span",["title","overlap"],"Drop files here \nor \nClick to select");return a.dataset.id="overlap",e.appendChild(t),e.appendChild(a),e}static createHashAlgorithms(){const e=(0,i.default)("div",["hash-algorithms"]);e.appendChild((0,i.default)("p",[],"Hash Algorithm: "));const t=(0,i.default)("ul",["algorithms"]);return["MD5","sha1","sha256","sha512"].forEach(((e,a)=>{const r=(0,i.default)("li",["algorithm"],e);0===a&&r.classList.add("algorithm-checked"),t.appendChild(r)})),e.appendChild(t),e}static createCalculatedHashContainer(){const e=(0,i.default)("div",["calculater-hash"]);return e.appendChild((0,i.default)("h2",[],"Calculated Hash:")),e.appendChild((0,i.default)("span",["calculated-result"],"*************")),e}static createWrapper(){return(0,i.default)("div",["wrapper-hasher"])}static createPreview(){return(0,i.default)("img",["image-preview"])}static createNoPreview(){return(0,i.default)("div",["no-preview"],"Предварительный просмотр недоступен")}}},565:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class a{constructor(e,t){this.element=e,this.onFileDropped=t,this.attachEventListeners()}attachEventListeners(){this.element.addEventListener("dragover",a.handleDragOver.bind(this)),this.element.addEventListener("drop",this.handleDrop.bind(this))}static handleDragOver(e){e.preventDefault()}handleDrop(e){var t;e.preventDefault();const a=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;a&&a.length>0&&this.onFileDropped(a[0])}}t.default=a},463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.file=null,this.algorithm="MD5",this.container=e}setFile(e){this.file=e,this.calculateHash()}setAlgorithm(e){this.algorithm=e,this.calculateHash()}setupWorker(){const e=new Worker("web.worker.worker.js");return e.addEventListener("message",(t=>{const a=t.data;this.updateCalculatedResult(a),e.terminate()})),e.addEventListener("error",(t=>{console.error(t),e.terminate()})),e}calculateHash(){if(!this.file||!this.algorithm)return;this.setupWorker().postMessage({selectElText:this.algorithm,data:this.file})}updateCalculatedResult(e){const t=this.container.querySelector(".calculated-result");t&&(t.textContent=e)}}},550:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(a(269)),l=r(a(565)),s=r(a(463));t.default=class{constructor(e){if(!e)throw new Error("Container element must not be null");this.container=e,this.algorithms=null,this.file=null,this.dropArea=null,this.hashCalculator=new s.default(this.container)}init(){this.drawUi(),this.events();const e=this.container.querySelector(".drop-field");this.dropArea=new l.default(e,this.handleFileDropped.bind(this))}drawUi(){const e=i.default.createWrapper();e.appendChild(i.default.createTitle()),e.appendChild(i.default.createDropField()),e.appendChild(this.createHashAlgorithms()),this.container.appendChild(e),this.container.appendChild(i.default.createCalculatedHashContainer())}createHashAlgorithms(){const e=i.default.createHashAlgorithms();return this.algorithms=e.querySelector(".algorithms"),e}handleFileDropped(e){this.updateImagePreview(e),this.hashCalculator.setFile(e)}onAlgorithmClick(e){var t,a,r;const i=e.target;if(i.classList.contains("algorithm")){null===(a=null===(t=this.algorithms)||void 0===t?void 0:t.querySelector(".algorithm-checked"))||void 0===a||a.classList.remove("algorithm-checked"),i.classList.add("algorithm-checked");const e=(null===(r=i.textContent)||void 0===r?void 0:r.toUpperCase())||"";this.hashCalculator.setAlgorithm(e)}}onFileChange(e){const t=e.target,{files:a}=t;a&&a.length>0&&(this.updateImagePreview(a[0]),this.hashCalculator.setFile(a[0]))}updateImagePreview(e){const t=this.container.querySelector(".image-preview"),a=this.container.querySelector(".no-preview");t&&t.remove(),a&&a.remove();if("image"===e.type.split("/")[0]){this.container.appendChild(i.default.createPreview());const t=new FileReader;t.onload=e=>{var t;this.container.querySelector(".image-preview").src=null===(t=e.target)||void 0===t?void 0:t.result},t.readAsDataURL(e)}else this.container.appendChild(i.default.createNoPreview())}events(){const e=document.querySelector("[data-id=file]"),t=document.querySelector(".algorithms");null==t||t.addEventListener("click",this.onAlgorithmClick.bind(this)),null==e||e.addEventListener("change",this.onFileChange.bind(this))}}},866:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(a(550)),l=document.getElementById("hasher-container");new i.default(l).init()},605:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=[],a=""){const r=document.createElement(e);if(r.classList.add(...t),a){a.split("\n").forEach(((e,t)=>{t>0&&r.appendChild(document.createElement("br")),r.appendChild(document.createTextNode(e))}))}return r}}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,a),l.exports}a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};a(310),a(866)})();
//# sourceMappingURL=main.js.map