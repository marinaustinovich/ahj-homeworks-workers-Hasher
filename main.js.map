{"version":3,"file":"main.js","mappings":"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","sources":["webpack://front/./src/ts/DOMService.ts","webpack://front/./src/ts/DropArea.ts","webpack://front/./src/ts/HashCalculator.ts","webpack://front/./src/ts/Widget.ts","webpack://front/./src/ts/app.ts","webpack://front/./src/ts/utils.ts","webpack://front/webpack/bootstrap","webpack://front/webpack/runtime/make namespace object","webpack://front/./src/index.ts"],"sourcesContent":["import createElement from './utils';\n\nexport default class DOMService {\n  static createTitle(): HTMLElement {\n    return createElement('h2', [], 'Hasher');\n  }\n\n  static createDropField(): HTMLElement {\n    const dropField = createElement('div', ['drop-field']);\n    const inputFile = createElement('input', ['overlapped'], '');\n    inputFile.setAttribute('type', 'file');\n    inputFile.dataset.id = 'file';\n    const overlapSpan = createElement(\n      'span',\n      ['title', 'overlap'],\n      'Drop files here \\nor \\nClick to select',\n    );\n    overlapSpan.dataset.id = 'overlap';\n    dropField.appendChild(inputFile);\n    dropField.appendChild(overlapSpan);\n    return dropField;\n  }\n\n  static createHashAlgorithms(): HTMLElement {\n    const hashAlgorithms = createElement('div', ['hash-algorithms']);\n    hashAlgorithms.appendChild(createElement('p', [], 'Hash Algorithm: '));\n    const algorithmsList = createElement('ul', ['algorithms']);\n    const algorithms = ['MD5', 'sha1', 'sha256', 'sha512'];\n    algorithms.forEach((algorithm, index) => {\n      const algorithmLi = createElement('li', ['algorithm'], algorithm);\n      if (index === 0) algorithmLi.classList.add('algorithm-checked');\n      algorithmsList.appendChild(algorithmLi);\n    });\n    hashAlgorithms.appendChild(algorithmsList);\n    return hashAlgorithms;\n  }\n\n  static createCalculatedHashContainer(): HTMLElement {\n    const calculatedHashContainer = createElement('div', ['calculater-hash']);\n    calculatedHashContainer.appendChild(\n      createElement('h2', [], 'Calculated Hash:'),\n    );\n    calculatedHashContainer.appendChild(\n      createElement('span', ['calculated-result'], '*************'),\n    );\n    return calculatedHashContainer;\n  }\n\n  static createWrapper(): HTMLElement {\n    return createElement('div', ['wrapper-hasher']);\n  }\n\n  static createPreview(): HTMLElement {\n    return createElement('img', ['image-preview']);\n  }\n\n  static createNoPreview(): HTMLElement {\n    return createElement('div', ['no-preview'], 'Предварительный просмотр недоступен');\n  }\n}\n","export default class DropArea {\n  private element: HTMLElement;\n\n  private onFileDropped: (file: File) => void;\n\n  constructor(element: HTMLElement, onFileDropped: (file: File) => void) {\n    this.element = element;\n    this.onFileDropped = onFileDropped;\n    this.attachEventListeners();\n  }\n\n  private attachEventListeners(): void {\n    this.element.addEventListener('dragover', DropArea.handleDragOver.bind(this));\n    this.element.addEventListener('drop', this.handleDrop.bind(this));\n  }\n\n  static handleDragOver(event: DragEvent): void {\n    event.preventDefault();\n  }\n\n  private handleDrop(event: DragEvent): void {\n    event.preventDefault();\n    const files = event.dataTransfer?.files;\n    if (files && files.length > 0) {\n      this.onFileDropped(files[0]);\n    }\n  }\n}\n","export default class HashCalculator {\n  private file: File | null = null;\n\n  private algorithm = 'MD5';\n\n  private container: HTMLElement;\n\n  constructor(container: HTMLElement) {\n    this.container = container;\n  }\n\n  setFile(file: File): void {\n    this.file = file;\n    this.calculateHash();\n  }\n\n  setAlgorithm(algorithm: string): void {\n    this.algorithm = algorithm;\n    this.calculateHash();\n  }\n\n  private setupWorker(): Worker {\n    const worker = new Worker('web.worker.worker.js');\n\n    worker.addEventListener('message', (event: MessageEvent) => {\n      const result = event.data as string;\n      this.updateCalculatedResult(result);\n      worker.terminate();\n    });\n\n    worker.addEventListener('error', (event) => {\n      console.error(event);\n      worker.terminate();\n    });\n\n    return worker;\n  }\n\n  private calculateHash(): void {\n    if (!this.file || !this.algorithm) return;\n    const worker = this.setupWorker();\n    worker.postMessage({\n      selectElText: this.algorithm,\n      data: this.file,\n    });\n  }\n\n  private updateCalculatedResult(hash: string): void {\n    const resultElement = this.container.querySelector(\n      '.calculated-result',\n    ) as HTMLElement;\n    if (resultElement) resultElement.textContent = hash;\n  }\n}\n","import DOMService from './DOMService';\nimport DropArea from './DropArea';\nimport HashCalculator from './HashCalculator';\n\nexport default class Widget {\n  private dropArea: DropArea | null;\n\n  private container: HTMLElement;\n\n  private algorithms: HTMLElement | null;\n\n  private file: File | null;\n\n  private hashCalculator: HashCalculator;\n\n  constructor(container: HTMLElement | null) {\n    if (!container) {\n      throw new Error('Container element must not be null');\n    }\n\n    this.container = container;\n    this.algorithms = null;\n    this.file = null;\n    this.dropArea = null;\n    this.hashCalculator = new HashCalculator(this.container);\n  }\n\n  init(): void {\n    this.drawUi();\n    this.events();\n\n    const dropEl = this.container.querySelector('.drop-field') as HTMLElement;\n    this.dropArea = new DropArea(dropEl, this.handleFileDropped.bind(this));\n  }\n\n  drawUi(): void {\n    const wrapper = DOMService.createWrapper();\n    wrapper.appendChild(DOMService.createTitle());\n    wrapper.appendChild(DOMService.createDropField());\n    wrapper.appendChild(this.createHashAlgorithms());\n    this.container.appendChild(wrapper);\n    this.container.appendChild(DOMService.createCalculatedHashContainer());\n  }\n\n  createHashAlgorithms(): HTMLElement {\n    const hashAlgorithms = DOMService.createHashAlgorithms();\n    this.algorithms = hashAlgorithms.querySelector(\n      '.algorithms',\n    ) as HTMLElement;\n    return hashAlgorithms;\n  }\n\n  private handleFileDropped(file: File): void {\n    this.updateImagePreview(file);\n    this.hashCalculator.setFile(file);\n  }\n\n  private onAlgorithmClick(event: Event): void {\n    const target = event.target as HTMLElement;\n    if (target.classList.contains('algorithm')) {\n      this.algorithms\n        ?.querySelector('.algorithm-checked')\n        ?.classList.remove('algorithm-checked');\n      target.classList.add('algorithm-checked');\n      const algorithm = target.textContent?.toUpperCase() || '';\n      this.hashCalculator.setAlgorithm(algorithm);\n    }\n  }\n\n  private onFileChange(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    const { files } = input;\n    if (files && files.length > 0) {\n      this.updateImagePreview(files[0]);\n      this.hashCalculator.setFile(files[0]);\n    }\n  }\n\n  updateImagePreview(file: File): void {\n    const existingPreview = this.container.querySelector('.image-preview');\n    const existingMessage = this.container.querySelector('.no-preview');\n\n    if (existingPreview) {\n      existingPreview.remove();\n    }\n\n    if (existingMessage) {\n      existingMessage.remove();\n    }\n\n    const fileType = file.type.split('/')[0];\n\n    if (fileType === 'image') {\n      this.container.appendChild(DOMService.createPreview());\n      const reader = new FileReader();\n      reader.onload = (e: ProgressEvent<FileReader>) => {\n        const imagePreview = this.container.querySelector(\n          '.image-preview',\n        ) as HTMLImageElement;\n        imagePreview.src = e.target?.result as string;\n      };\n      reader.readAsDataURL(file);\n    } else {\n      this.container.appendChild(DOMService.createNoPreview());\n    }\n  }\n\n  events(): void {\n    const fileEl = document.querySelector('[data-id=file]') as HTMLInputElement;\n    const algorithmsEl = document.querySelector('.algorithms');\n\n    algorithmsEl?.addEventListener('click', this.onAlgorithmClick.bind(this));\n    fileEl?.addEventListener('change', this.onFileChange.bind(this));\n  }\n}\n","import Widget from './Widget';\n\nconst container = document.getElementById('hasher-container');\nconst widget = new Widget(container);\nwidget.init();\n","export default function createElement(\n  tag: string,\n  classes: string[] = [],\n  content = '',\n): HTMLElement {\n  const element = document.createElement(tag);\n  element.classList.add(...classes);\n\n  if (content) {\n    const lines = content.split('\\n');\n    lines.forEach((line, index) => {\n      if (index > 0) {\n        element.appendChild(document.createElement('br'));\n      }\n      element.appendChild(document.createTextNode(line));\n    });\n  }\n\n  return element;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './css/style.css';\nimport './ts/app';\n"],"names":["static","dropField","inputFile","setAttribute","dataset","id","overlapSpan","appendChild","hashAlgorithms","algorithmsList","forEach","algorithm","index","algorithmLi","classList","add","calculatedHashContainer","DropArea","constructor","element","onFileDropped","this","attachEventListeners","addEventListener","handleDragOver","bind","handleDrop","event","preventDefault","files","dataTransfer","length","container","file","setFile","calculateHash","setAlgorithm","setupWorker","worker","Worker","result","data","updateCalculatedResult","terminate","console","error","postMessage","selectElText","hash","resultElement","querySelector","textContent","Error","algorithms","dropArea","hashCalculator","init","drawUi","events","dropEl","handleFileDropped","wrapper","createWrapper","createTitle","createDropField","createHashAlgorithms","createCalculatedHashContainer","updateImagePreview","onAlgorithmClick","target","contains","remove","toUpperCase","onFileChange","input","existingPreview","existingMessage","type","split","createPreview","reader","FileReader","onload","e","src","readAsDataURL","createNoPreview","fileEl","document","algorithmsEl","getElementById","tag","classes","content","createElement","line","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","r","Symbol","toStringTag","Object","defineProperty","value"],"sourceRoot":""}